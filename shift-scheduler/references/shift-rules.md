# シフト作成ルール・リファレンス

## 労働基準法の主要規定

### 労働時間
- **法定労働時間**: 1日8時間、週40時間以内
- **変形労働時間制**: 1ヶ月単位で平均週40時間以内なら可
- **36協定**: 時間外労働には労使協定が必要

### 休日
- **法定休日**: 週1日または4週4日以上
- **振替休日**: 事前に指定すれば休日労働にならない
- **代休**: 休日労働後に与える休日（割増賃金は発生）

### 割増賃金
- **時間外**: 25%以上
- **深夜(22:00-5:00)**: 25%以上
- **休日**: 35%以上

### パート・アルバイト
- **週20時間以上**: 雇用保険加入義務
- **週30時間以上**: 社会保険加入義務（従業員101人以上の企業）
- **有給休暇**: 週所定労働日数に応じて比例付与

## 公平性アルゴリズム

### 基本原則
1. **均等配分**: 同じ雇用形態なら勤務日数を均等に
2. **負担の平準化**: 土日祝・繁忙期の出勤を均等に分散
3. **希望の尊重**: 可能な限り希望休を反映

### 割り当て優先順位
```
1. 必須配置（スキル要件）を満たす
2. 法定制約を遵守（連勤上限、週休確保）
3. 希望休を反映
4. 公平性スコアで最適化
```

### 公平性スコア計算

```python
def fairness_score(staff):
    score = 0
    # 土日出勤回数の偏差
    weekend_variance = calculate_variance([s.weekend_count for s in staff])
    score -= weekend_variance * 10
    
    # 連勤回数の偏差
    consecutive_variance = calculate_variance([s.max_consecutive for s in staff])
    score -= consecutive_variance * 5
    
    # 希望休の充足率
    request_rate = sum(s.fulfilled_requests / s.total_requests for s in staff)
    score += request_rate * 20
    
    return score
```

### 制約チェックリスト

| 制約 | チェック内容 | 重要度 |
|-----|------------|-------|
| 連続勤務 | 6日以上連続していないか | 必須 |
| 週休 | 各週に1日以上休みがあるか | 必須 |
| 週労働時間 | 40時間を超えていないか | 必須 |
| 希望休 | NGと指定された日に割り当てていないか | 高 |
| 必要人数 | 各シフトの最低人数を満たしているか | 必須 |
| 土日均等 | 土日出勤回数の差が2回以内か | 中 |

## ショッピングセンター特有の考慮事項

### 繁忙期対応
- 年末年始、GW、お盆は増員
- セール期間は全員出勤の可能性を事前周知

### スキル要件
- **開店作業**: 鍵管理、レジ開け
- **閉店作業**: レジ締め、施錠
- **特定業務**: 特殊レジ操作、クレーム対応

### シフト引継ぎ
- 早番→遅番の引継ぎ時間（30分程度）を確保
- 重要情報の共有タイミングを設定
